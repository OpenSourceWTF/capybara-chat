# Development overrides â€” mounts source code for hot-reload
services:
  server:
    build:
      target: base
    command: [ "pnpm", "--filter", "@capybara-chat/server", "dev" ]
    volumes:
      - ..:/app
      - /app/node_modules
      - server-data:/data

  bridge:
    build:
      target: base
    command: [ "pnpm", "--filter", "@capybara-chat/bridge", "dev" ]
    volumes:
      - ..:/app
      - /app/node_modules
      - /var/run/docker.sock:/var/run/docker.sock

  ui:
    build:
      context: ..
      dockerfile: docker/ui/Dockerfile
      target: base
    command: [ "pnpm", "--filter", "@capybara-chat/ui", "dev" ]
    volumes:
      - ..:/app
      - /app/node_modules
    ports:
      - "3000:5173"
